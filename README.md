# Inductor LangGraph MCP

A LangGraph-based system for reverse engineering HLASM (High Level Assembler) code using hypothesis generation, validation, and Neo4j for knowledge storage.

![Graph view in LangGraph studio UI](./static/studio_ui.png)

## Overview

This project implements a reverse engineering pipeline for HLASM codebases using LangGraph. It combines:

1. **Neo4j Operations** - Basic CRUD operations for Neo4j nodes
2. **Hypothesis Management** - Creating, validating, and managing hypotheses about code functionality
3. **MCP (Model-Control-Persistence) Servers** - JSON-RPC interfaces for interacting with Neo4j and hypothesis operations
4. **LangGraph Workflow** - A graph-based workflow for reverse engineering that uses LLMs to guide the process

The system allows you to:
- Generate hypotheses about HLASM code functionality
- Explore evidence to validate or refute hypotheses
- Store and manage hypotheses in a Neo4j database
- Navigate through a guided reverse engineering process

## Components

### Neo4j Operations

The Neo4j Operations module provides basic CRUD operations for Neo4j nodes, ensuring that each node has an ID and a nodeType property. See [Neo4j Operations README](src/neo4j_operations_README.md) for details.

### Hypothesis Management

The Hypothesis module provides CRUD operations for Hypothesis nodes in Neo4j, with specialized functionality for handling hypotheses. It includes:

- HypothesisSubject and HypothesisObject dataclasses
- Operations for creating, reading, updating, and deleting hypotheses
- Validation of hypothesis data

See [Hypothesis README](src/hypothesis_README.md) for details.

### MCP Servers

The project includes MCP servers that provide JSON-RPC interfaces for:

- Neo4j operations
- Hypothesis management
- HLASM analysis

These servers can be integrated with LangGraph using the `langchain_mcp_adapters` package. See [Hypothesis MCP README](src/hypothesis_mcp_README.md) for details.

### LangGraph Workflow

The core of the project is a LangGraph workflow that guides the reverse engineering process:

1. **Lead Agent** - Guides the overall reverse engineering process
2. **Evidence Gatherer** - Explores evidence related to hypotheses
3. **Hypothesizer** - Generates hypotheses about code functionality
4. **Validator** - Validates generated hypotheses
5. **Free Explorer** - Allows for free exploration of the codebase

## Getting Started

### Prerequisites

1. Neo4j installed and running
2. Python 3.8+
3. LangGraph Studio (optional, for visualization)

### Installation

1. Clone the repository:

```bash
git clone https://github.com/yourusername/inductor-langgraph-mcp.git
cd inductor-langgraph-mcp
```

2. Install dependencies:

```bash
poetry install
```

For development dependencies:

```bash
poetry install --with dev
```

3. Create a `.env` file with Neo4j connection details:

```
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_password
```

### Running the System

1. Start the MCP servers:

```bash
poetry run python src/agent/hypothesis_mcp_server.py
```

2. Run the LangGraph workflow:

```bash
poetry run python src/graph/hypo.py
```

## Usage

The system provides a conversational interface for reverse engineering HLASM code:

1. **Generate Hypotheses** - Ask the system to generate hypotheses about specific parts of the code
2. **Explore Evidence** - Request the system to gather evidence to support or refute hypotheses
3. **Validate Hypotheses** - Ask the system to validate existing hypotheses
4. **Free Exploration** - Freely explore the codebase with the help of the system

## Development

### Adding New Tools

You can extend the system by adding new tools to the MCP servers or by modifying the LangGraph workflow in `src/graph/hypo.py`.

### Customizing the Workflow

The LangGraph workflow can be customized by modifying the `make_graph` function in `src/graph/hypo.py`. You can add new nodes, edges, or change the flow of the conversation.

<!--
Configuration auto-generated by `langgraph template lock`. DO NOT EDIT MANUALLY.
{
  "config_schemas": {
    "agent": {
      "type": "object",
      "properties": {}
    }
  }
}
-->

## Examples

See the following files for examples:
- `src/hypothesis_example.py` - Example of using the Hypothesis operations
- `src/neo4j_example.py` - Example of using the Neo4j operations
- `src/hypothesis_mcp_test.py` - Example of using the Hypothesis MCP server

## License

[License information]

## Acknowledgments

- [LangGraph](https://github.com/langchain-ai/langgraph) - For the graph-based workflow framework
- [Neo4j](https://neo4j.com/) - For the graph database
- [LangChain](https://github.com/langchain-ai/langchain) - For LLM integration
